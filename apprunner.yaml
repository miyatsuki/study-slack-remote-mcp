version: 1.0
runtime: python311
build:
  commands:
    build:
      - echo "=== Git Information ==="
      - git log --oneline -5
      - git branch -a
      - git status
      - echo "=== Current commit ==="
      - git rev-parse HEAD
      - echo "=== Environment Info ==="
      - pwd
      - python3 --version
      - ls -la
      - echo "=== Build completed ==="
run:
  runtime-version: 3.11
  commands:
    pre-run:
      - echo "=== Installing dependencies ==="
      - pip3 install -r requirements.txt
      - echo "=== Dependencies installed ==="
  command: python3 server.py
  network:
    port: 8080
    env: PORT
  env:
    - name: AWS_REGION
      value: ap-northeast-1
    - name: DYNAMODB_TABLE_NAME
      value: slack-mcp-tokens-dev
    - name: MCP_ENV
      value: dev
  secrets:
    - name: SERVICE_BASE_URL
      value-from: /slack-mcp/dev/service-base-url
    - name: SLACK_CLIENT_ID
      value-from: /slack-mcp/dev/client-id
    - name: SLACK_CLIENT_SECRET
      value-from: /slack-mcp/dev/client-secret